//NICKNAME CHECK
$(document).on('keyup focusout', '#nickname', function() {
    var nickname = $("#nickname").val();
    if (nickname.match(nickname.match(/^[a-zA-Z0-9_\-]*$/)) == null) {
        $("#nickname").removeClass("green").addClass("red");
        $("#status").html(langArray.nickname_contains_illegal_characters);
    } else {
        var url = "ajax/ajax-nick.php";
        $("#status").html('<img src="./img/loader.gif">&nbsp;' + langArray['checking_availability']);
        $.ajax({
            type: "POST",
            url: url,
            data: $("#nickname").serialize(),
            success: function(msg) {
                if (msg == 'NICKOK') {
                    $("#nickname").removeClass("red").addClass("green");
                    $("#status").html(langArray.nickname_available);
                } else if (msg == 'LENGTHFAIL') {
                    $("#nickname").removeClass("green").addClass("red");
                    $("#status").html(langArray.nickname_too_short);

                } else if (msg == 'NICKEXIST') {
                    $("#nickname").removeClass("green").addClass("red");
                    $("#status").html(langArray.nickname_already_exists);
                }
            }
        });
        return false;
    };
});

//EMAIL CHECK
$(document).on('keyup focusout', '#email', function() {
    var url = "ajax/ajax-email.php";
    $("#statusemail").html('<img src="./img/loader.gif">&nbsp;' + langArray.checking_availability);
    $.ajax({
        type: "POST",
        url: url,
        data: $("#email").serialize(),
        success: function(msg) {
            if (msg == 'EMAILOK') {
                $("#email").removeClass("red").addClass("green");
                $("#statusemail").html('');
            } else if (msg == 'EMAILINUSE') {
                $("#email").removeClass("green").addClass("red");
                $("#statusemail").html(langArray.the_email_address_already_exists);
            } else if (msg == 'EMAILFAIL') {
                $("#email").removeClass("green").addClass("red");
                $("#statusemail").html(langArray.you_must_enter_a_valid_email_address);
            }
        }
    });
    return false;
});

//FULLNAME CHECK
$("#fullname").on("keyup focusout", function() {
    var fullname = $(this).val();

    if (fullname.match(illegalChars)) {
        $(this).removeClass("green").addClass("red");
        $("#statusfullname").html(langArray.fullname_contains_illegal_characters);
    } else if (!fullname || !fullname.match(validName) || fullname.length < 2 || !fullname.match(/\s/)) {
        $(this).removeClass("green").addClass("red");
        $("#statusfullname").html(langArray.you_must_enter_your_full_name);
    } else {
        $(this).removeClass("red").addClass("green");
        $("#statusfullname").html("");
    }
});
